
html_content = '''<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#722F37">
    <title>NARXOZ College - Smart Journal</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #722F37;
            --primary-dark: #5a252c;
            --primary-light: #8B3A44;
            --accent: #D4AF37;
            --bg: #F8F9FA;
            --card-bg: #FFFFFF;
            --text: #1A1A1A;
            --text-secondary: #6B7280;
            --border: #E5E7EB;
            --success: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            --info: #3B82F6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: 'Inter', sans-serif;
        }

        html, body {
            height: 100%;
            overflow: hidden;
            background: var(--bg);
            color: var(--text);
        }

        .mobile-container {
            max-width: 480px;
            margin: 0 auto;
            height: 100vh;
            background: var(--bg);
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 40px rgba(0,0,0,0.1);
        }

        /* Splash Screen */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .splash-logo {
            width: 120px;
            height: 120px;
            background: var(--accent);
            border-radius: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: var(--primary-dark);
            font-weight: 800;
            margin-bottom: 24px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .splash-text {
            color: white;
            font-size: 28px;
            font-weight: 700;
            letter-spacing: 2px;
        }

        .splash-subtext {
            color: rgba(255,255,255,0.8);
            margin-top: 8px;
            font-size: 14px;
        }

        /* Auth Screens */
        .auth-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            z-index: 100;
            display: none;
            flex-direction: column;
            padding: 40px 24px;
            overflow-y: auto;
        }

        .auth-screen.active {
            display: flex;
        }

        .auth-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .auth-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            border-radius: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: white;
            font-size: 32px;
            box-shadow: 0 10px 30px rgba(114, 47, 55, 0.3);
        }

        .auth-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 8px;
        }

        .auth-subtitle {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 14px;
            color: var(--text);
        }

        .input-field {
            width: 100%;
            padding: 16px;
            border: 2px solid var(--border);
            border-radius: 16px;
            font-size: 16px;
            transition: all 0.3s;
            background: var(--bg);
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
        }

        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(114, 47, 55, 0.4);
        }

        .btn-primary:active {
            transform: scale(0.98);
        }

        .btn-secondary {
            background: var(--bg);
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .user-list {
            margin-top: 20px;
            background: var(--bg);
            border-radius: 16px;
            padding: 16px;
        }

        .user-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: white;
            border-radius: 12px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .user-item:hover {
            border-color: var(--primary);
            transform: translateX(4px);
        }

        .user-avatar-small {
            width: 40px;
            height: 40px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }

        .user-info-small {
            flex: 1;
        }

        .user-name-small {
            font-weight: 600;
            font-size: 14px;
        }

        .user-role-small {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .code-inputs {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin: 30px 0;
        }

        .code-input {
            width: 56px;
            height: 64px;
            border: 2px solid var(--border);
            border-radius: 16px;
            text-align: center;
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            transition: all 0.3s;
        }

        .code-input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(114, 47, 55, 0.05);
            transform: scale(1.1);
        }

        /* Main App */
        .main-app {
            display: none;
            height: 100%;
            flex-direction: column;
            overflow-y: auto;
            scroll-behavior: smooth;
        }

        .main-app.active {
            display: flex;
        }

        /* Content Sections */
        .content-section {
            display: none;
            padding-bottom: 100px;
            flex: 1;
            overflow-y: auto;
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Global Header (only icons, no GPA here) */
        .global-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 16px 20px;
            position: sticky;
            top: 0;
            z-index: 50;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-title {
            font-size: 18px;
            font-weight: 700;
        }

        .header-actions {
            display: flex;
            gap: 12px;
        }

        .icon-btn {
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.2);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 16px;
            cursor: pointer;
            position: relative;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
        }

        .icon-btn:active {
            transform: scale(0.9);
        }

        .badge {
            position: absolute;
            top: -2px;
            right: -2px;
            width: 18px;
            height: 18px;
            background: var(--accent);
            color: var(--primary-dark);
            border-radius: 50%;
            font-size: 10px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid var(--primary);
        }

        .badge.hidden {
            display: none;
        }

        /* Home Specific Header with GPA */
        .home-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 20px;
            border-radius: 0 0 30px 30px;
            margin-bottom: 20px;
        }

        .user-greeting {
            margin-bottom: 20px;
        }

        .greeting-text {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 4px;
        }

        .user-name {
            font-size: 22px;
            font-weight: 700;
        }

        .user-role-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: rgba(255,255,255,0.2);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            margin-top: 8px;
            font-weight: 600;
        }

        .quick-stats {
            display: flex;
            gap: 12px;
            overflow-x: auto;
            scrollbar-width: none;
        }

        .quick-stats::-webkit-scrollbar {
            display: none;
        }

        .stat-chip {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            padding: 12px 16px;
            border-radius: 16px;
            min-width: 120px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .stat-chip-label {
            font-size: 11px;
            opacity: 0.8;
            margin-bottom: 4px;
        }

        .stat-chip-value {
            font-size: 18px;
            font-weight: 700;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding: 0 20px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text);
        }

        .see-all {
            color: var(--primary);
            font-size: 14px;
            font-weight: 600;
            text-decoration: none;
        }

        .card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin: 0 20px 16px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
            border: 1px solid var(--border);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .card-title {
            font-weight: 700;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-icon {
            width: 36px;
            height: 36px;
            background: rgba(114, 47, 55, 0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
        }

        /* Teacher Actions */
        .teacher-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin: 0 20px 20px;
        }

        .action-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            border: 2px solid var(--border);
            cursor: pointer;
            transition: all 0.3s;
        }

        .action-card:active {
            transform: scale(0.95);
            border-color: var(--primary);
        }

        .action-icon {
            width: 48px;
            height: 48px;
            background: rgba(114, 47, 55, 0.1);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 12px;
            color: var(--primary);
            font-size: 20px;
        }

        .action-title {
            font-weight: 700;
            font-size: 14px;
            margin-bottom: 4px;
        }

        .action-desc {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Schedule */
        .schedule-item {
            display: flex;
            gap: 16px;
            padding: 16px 0;
            border-bottom: 1px solid var(--border);
        }

        .schedule-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .time-column {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 50px;
        }

        .time-start {
            font-weight: 700;
            color: var(--primary);
            font-size: 14px;
        }

        .time-end {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        .time-line {
            flex: 1;
            width: 2px;
            background: var(--border);
            margin: 8px 0;
        }

        .schedule-content {
            flex: 1;
            background: var(--bg);
            padding: 16px;
            border-radius: 16px;
            border-left: 4px solid var(--primary);
            position: relative;
        }

        .subject-name {
            font-weight: 700;
            font-size: 15px;
            margin-bottom: 6px;
        }

        .subject-room {
            font-size: 13px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 8px;
        }

        .edit-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 32px;
            height: 32px;
            border: none;
            background: white;
            border-radius: 8px;
            color: var(--primary);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .subject-status {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-current {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        /* Grade Entry for Teachers */
        .grade-entry-table {
            width: 100%;
            border-collapse: collapse;
        }

        .grade-entry-table th,
        .grade-entry-table td {
            padding: 12px 8px;
            text-align: left;
            border-bottom: 1px solid var(--border);
            font-size: 13px;
        }

        .grade-entry-table th {
            font-weight: 600;
            color: var(--primary);
            font-size: 11px;
            text-transform: uppercase;
        }

        .grade-input-small {
            width: 50px;
            padding: 8px;
            border: 2px solid var(--border);
            border-radius: 8px;
            text-align: center;
            font-weight: 700;
            color: var(--primary);
        }

        .grade-input-small:focus {
            outline: none;
            border-color: var(--primary);
        }

        .total-grade {
            font-weight: 800;
            color: var(--primary);
            font-size: 16px;
        }

        /* Attendance */
        .attendance-list {
            margin-top: 16px;
        }

        .attendance-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            background: var(--bg);
            border-radius: 12px;
            margin-bottom: 8px;
        }

        .attendance-name {
            font-weight: 600;
            font-size: 14px;
        }

        .attendance-group {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .attendance-toggle {
            display: flex;
            gap: 8px;
        }

        .toggle-btn {
            padding: 8px 16px;
            border: 2px solid var(--border);
            background: white;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .toggle-btn.active.present {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        .toggle-btn.active.absent {
            background: var(--danger);
            color: white;
            border-color: var(--danger);
        }

        /* Notifications */
        .notification-item {
            display: flex;
            gap: 12px;
            padding: 16px;
            background: var(--card-bg);
            border-radius: 16px;
            margin: 0 20px 12px;
            border: 1px solid var(--border);
            position: relative;
            transition: all 0.3s;
        }

        .notification-item.unread {
            background: rgba(114, 47, 55, 0.03);
            border-left: 4px solid var(--primary);
        }

        .notification-item.read {
            opacity: 0.7;
        }

        .notification-icon {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .notification-icon.grade { background: rgba(16, 185, 129, 0.1); color: var(--success); }
        .notification-icon.schedule { background: rgba(59, 130, 246, 0.1); color: var(--info); }
        .notification-icon.alert { background: rgba(245, 158, 11, 0.1); color: var(--warning); }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 4px;
        }

        .notification-text {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        .notification-time {
            font-size: 11px;
            color: var(--text-secondary);
            margin-top: 6px;
        }

        .notification-delete {
            position: absolute;
            top: 50%;
            right: 16px;
            transform: translateY(-50%);
            color: var(--text-secondary);
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .notification-item:hover .notification-delete {
            opacity: 1;
        }

        /* Profile */
        .profile-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            margin: -20px -20px 20px;
            padding: 30px 20px;
            color: white;
            text-align: center;
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            background: white;
            border-radius: 50%;
            margin: 0 auto 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: var(--primary);
            border: 4px solid rgba(255,255,255,0.3);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .profile-name {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .profile-role {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 16px;
        }

        .profile-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
        }

        .profile-stat {
            text-align: center;
        }

        .profile-stat-value {
            font-size: 24px;
            font-weight: 800;
            margin-bottom: 4px;
        }

        .profile-stat-label {
            font-size: 12px;
            opacity: 0.8;
        }

        .menu-list {
            background: var(--card-bg);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
            border: 1px solid var(--border);
            margin-bottom: 20px;
        }

        .menu-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 18px 20px;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.2s;
        }

        .menu-item:last-child {
            border-bottom: none;
        }

        .menu-item:active {
            background: var(--bg);
        }

        .menu-icon {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            background: rgba(114, 47, 55, 0.1);
            color: var(--primary);
        }

        .menu-text {
            flex: 1;
            font-weight: 600;
        }

        .menu-arrow {
            color: var(--text-secondary);
        }

        /* Bottom Nav */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 480px;
            background: white;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-around;
            padding: 8px 0 24px;
            z-index: 100;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.05);
        }

        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            background: none;
            color: var(--text-secondary);
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-item.active .nav-icon {
            background: rgba(114, 47, 55, 0.1);
            transform: translateY(-4px);
        }

        .nav-icon {
            width: 44px;
            height: 44px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.3s;
        }

        .nav-label {
            font-size: 11px;
            font-weight: 600;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 200;
            align-items: flex-end;
            justify-content: center;
            backdrop-filter: blur(4px);
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            width: 100%;
            max-width: 480px;
            border-radius: 30px 30px 0 0;
            padding: 24px;
            max-height: 85vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 700;
        }

        .close-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: none;
            background: var(--bg);
            color: var(--text);
            font-size: 18px;
            cursor: pointer;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 14px;
        }

        .form-select, .form-input {
            width: 100%;
            padding: 14px;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 15px;
            background: white;
        }

        .form-select:focus, .form-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-secondary);
        }

        .empty-state i {
            font-size: 48px;
            margin-bottom: 16px;
            color: var(--border);
        }
    </style>
</head>
<body>
    <div class="splash-screen" id="splash">
        <div class="splash-logo">N</div>
        <div class="splash-text">NARXOZ</div>
        <div class="splash-subtext">Smart Journal</div>
    </div>

    <div class="mobile-container">
        <!-- Auth Screen -->
        <div class="auth-screen active" id="authScreen">
            <div class="auth-header">
                <div class="auth-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <div class="auth-title">–ñ“Ø–π–µ–≥–µ –∫—ñ—Ä—É</div>
                <div class="auth-subtitle">–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤—Ç—ñ –∞–∫–∫–∞—É–Ω—Ç—ã“£—ã–∑–¥—ã —Ç–∞“£–¥–∞“£—ã–∑</div>
            </div>

            <div class="user-list" id="userList">
                <!-- Generated by JS -->
            </div>

            <div style="margin-top: 30px; text-align: center; color: var(--text-secondary); font-size: 12px;">
                “ö–∞—É—ñ–ø—Å—ñ–∑ –∫—ñ—Ä—É –∂“Ø–π–µ—Å—ñ ‚Ä¢ v2.0
            </div>
        </div>

        <!-- Code Verification -->
        <div class="auth-screen" id="codeScreen">
            <div class="auth-header">
                <div class="auth-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <div class="auth-title">“ö“±–ø–∏—è —Å”©–∑–¥—ñ –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑</div>
                <div class="auth-subtitle" id="codeUserName">–ê–∑–∞–º–∞—Ç ”ò–ª—ñ–º</div>
            </div>

            <div class="code-inputs">
                <input type="password" class="code-input" maxlength="1" onkeyup="moveToNext(this, 0)">
                <input type="password" class="code-input" maxlength="1" onkeyup="moveToNext(this, 1)">
                <input type="password" class="code-input" maxlength="1" onkeyup="moveToNext(this, 2)">
                <input type="password" class="code-input" maxlength="1" onkeyup="moveToNext(this, 3)">
            </div>

            <button class="btn btn-primary" onclick="verifyCode()">
                <i class="fas fa-unlock"></i>
                –ö—ñ—Ä—É
            </button>

            <button class="btn btn-secondary" style="margin-top: 12px;" onclick="backToUsers()">
                <i class="fas fa-arrow-left"></i>
                –ê—Ä—Ç“õ–∞
            </button>

            <div style="margin-top: 24px; text-align: center; font-size: 13px; color: var(--text-secondary);">
                “ö“±–ø–∏—è —Å”©–∑–¥—ñ “±–º—ã—Ç—Ç—ã“£—ã–∑ –±–∞? <span style="color: var(--primary); font-weight: 600; cursor: pointer;">“ö–∞–π—Ç–∞ –æ—Ä–Ω–∞—Ç—É</span>
            </div>
        </div>

        <!-- Main App -->
        <div class="main-app" id="mainApp">
            <!-- Global Header (no GPA here) -->
            <div class="global-header" id="globalHeader">
                <div class="header-title" id="pageTitle">–ë–∞—Å—Ç—ã –±–µ—Ç</div>
                <div class="header-actions">
                    <button class="icon-btn" onclick="goToNotifications()">
                        <i class="fas fa-bell"></i>
                        <span class="badge" id="notifBadge">3</span>
                    </button>
                    <button class="icon-btn" onclick="goToProfile()">
                        <i class="fas fa-user"></i>
                    </button>
                </div>
            </div>

            <!-- HOME SECTION -->
            <div class="content-section active" id="homeSection">
                <div class="home-header">
                    <div class="user-greeting">
                        <div class="greeting-text">“ö–æ—à –∫–µ–ª–¥—ñ“£—ñ–∑,</div>
                        <div class="user-name" id="homeUserName">–ê–∑–∞–º–∞—Ç ”ò–ª—ñ–º</div>
                        <div class="user-role-badge" id="userRoleBadge">
                            <i class="fas fa-graduation-cap"></i>
                            <span id="roleText">–°—Ç—É–¥–µ–Ω—Ç</span>
                        </div>
                    </div>
                    <div class="quick-stats">
                        <div class="stat-chip">
                            <div class="stat-chip-label">GPA</div>
                            <div class="stat-chip-value" id="homeGPA">3.85</div>
                        </div>
                        <div class="stat-chip">
                            <div class="stat-chip-label">“ö–∞—Ä–∑—ã</div>
                            <div class="stat-chip-value" id="homeDebt">0 ‚Ç∏</div>
                        </div>
                        <div class="stat-chip">
                            <div class="stat-chip-label">“ö–∞—Ç—ã—Å—É</div>
                            <div class="stat-chip-value" id="homeAttendance">96%</div>
                        </div>
                    </div>
                </div>

                <!-- Teacher Actions (only for teachers) -->
                <div id="teacherActions" style="display: none;">
                    <div class="section-header">
                        <div class="section-title">–û“õ—ã—Ç—É—à—ã –º–µ–Ω—é—ñ</div>
                    </div>
                    <div class="teacher-actions">
                        <div class="action-card" onclick="openGradeEntry()">
                            <div class="action-icon">
                                <i class="fas fa-edit"></i>
                            </div>
                            <div class="action-title">–ë–∞“ì–∞ “õ–æ—é</div>
                            <div class="action-desc">–ñ—É—Ä–Ω–∞–ª —Ç–æ–ª—Ç—ã—Ä—É</div>
                        </div>
                        <div class="action-card" onclick="openAttendance()">
                            <div class="action-icon">
                                <i class="fas fa-clipboard-check"></i>
                            </div>
                            <div class="action-title">“ö–∞—Ç—ã—Å—É</div>
                            <div class="action-desc">–ë–∞—Ä/–ñ–æ“õ –±–µ–ª–≥—ñ–ª–µ—É</div>
                        </div>
                        <div class="action-card" onclick="openScheduleEdit()">
                            <div class="action-icon">
                                <i class="fas fa-calendar-plus"></i>
                            </div>
                            <div class="action-title">–ö–µ—Å—Ç–µ</div>
                            <div class="action-desc">–°–∞–±–∞“õ “õ–æ—Å—É</div>
                        </div>
                        <div class="action-card" onclick="showStats()">
                            <div class="action-icon">
                                <i class="fas fa-chart-pie"></i>
                            </div>
                            <div class="action-title">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</div>
                            <div class="action-desc">–¢–æ–ø —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞—Å—ã</div>
                        </div>
                    </div>
                </div>

                <!-- Student Content -->
                <div id="studentContent">
                    <div class="section-header">
                        <div class="section-title">–ë“Ø–≥—ñ–Ω–≥—ñ —Å–∞–±–∞“õ—Ç–∞—Ä</div>
                        <span class="see-all" onclick="switchTab('schedule')">–¢–æ–ª—ã“õ</span>
                    </div>

                    <div class="card">
                        <div class="schedule-item">
                            <div class="time-column">
                                <div class="time-start">09:00</div>
                                <div class="time-line"></div>
                                <div class="time-end">10:30</div>
                            </div>
                            <div class="schedule-content">
                                <div class="subject-name">Web-–ø—Ä–æ–≥—Ä–∞–º–º–∞–ª–∞—É</div>
                                <div class="subject-room">
                                    <i class="fas fa-map-marker-alt"></i>
                                    305 –∫–∞–±., –ê –∫–æ—Ä–ø—É—Å
                                </div>
                                <span class="subject-status status-current">
                                    <i class="fas fa-play-circle"></i>
                                    “ö–∞–∑—ñ—Ä
                                </span>
                            </div>
                        </div>
                        <div class="schedule-item">
                            <div class="time-column">
                                <div class="time-start">10:45</div>
                                <div class="time-line"></div>
                                <div class="time-end">12:15</div>
                            </div>
                            <div class="schedule-content">
                                <div class="subject-name">–ú”ô–ª—ñ–º–µ—Ç—Ç–µ—Ä –±–∞–∑–∞—Å—ã</div>
                                <div class="subject-room">
                                    <i class="fas fa-map-marker-alt"></i>
                                    412 –∫–∞–±., B –∫–æ—Ä–ø—É—Å
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="section-header" style="margin-top: 24px;">
                        <div class="section-title">–ñ–∞“õ—ã–Ω –∞—Ä–∞–¥–∞“ì—ã</div>
                    </div>

                    <div class="card" style="border-left: 4px solid var(--danger);">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="background: rgba(239, 68, 68, 0.1); color: var(--danger); padding: 12px; border-radius: 12px; font-weight: 700;">
                                15<br><small style="font-size: 10px;">“ö–ê“¢</small>
                            </div>
                            <div>
                                <div style="font-weight: 700;">React –∂–æ–±–∞—Å—ã–Ω —Ç–∞–ø—Å—ã—Ä—É</div>
                                <div style="font-size: 13px; color: var(--text-secondary);">Web-–ø—Ä–æ–≥—Ä–∞–º–º–∞–ª–∞—É</div>
                            </div>
                            <div style="margin-left: auto; background: var(--danger); color: white; padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 700;">
                                2 –∫“Ø–Ω
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCHEDULE SECTION -->
            <div class="content-section" id="scheduleSection">
                <div style="padding: 20px;">
                    <div style="display: flex; gap: 8px; overflow-x: auto; margin-bottom: 20px; scrollbar-width: none;">
                        <div style="min-width: 60px; padding: 12px; background: var(--primary); color: white; border-radius: 16px; text-align: center;">
                            <div style="font-size: 12px;">–î—Å</div>
                            <div style="font-weight: 700;">13</div>
                        </div>
                        <div style="min-width: 60px; padding: 12px; background: white; border: 2px solid var(--border); border-radius: 16px; text-align: center;">
                            <div style="font-size: 12px;">–°—Å</div>
                            <div style="font-weight: 700;">14</div>
                        </div>
                        <div style="min-width: 60px; padding: 12px; background: white; border: 2px solid var(--border); border-radius: 16px; text-align: center;">
                            <div style="font-size: 12px;">–°—Ä</div>
                            <div style="font-weight: 700;">15</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <div class="card-icon"><i class="fas fa-calendar-day"></i></div>
                                –î“Ø–π—Å–µ–Ω–±—ñ, 13 “õ–∞“£—Ç–∞—Ä
                            </div>
                            <button class="edit-btn" id="scheduleEditBtn" style="display: none;" onclick="openScheduleEdit()">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div id="scheduleList">
                            <!-- Filled by JS -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- GRADES SECTION -->
            <div class="content-section" id="gradesSection">
                <div style="padding: 20px;">
                    <div style="display: flex; gap: 12px; margin-bottom: 20px;">
                        <select class="form-select" id="gradeGroupSelect" onchange="loadGrades()">
                            <option>IT-231</option>
                            <option>IT-232</option>
                        </select>
                        <select class="form-select" id="gradeSubjectSelect" onchange="loadGrades()">
                            <option>Web-–ø—Ä–æ–≥—Ä–∞–º–º–∞–ª–∞—É</option>
                            <option>–ú”ô–ª—ñ–º–µ—Ç—Ç–µ—Ä –±–∞–∑–∞—Å—ã</option>
                        </select>
                    </div>

                    <div class="card" id="gradeEntryCard" style="display: none;">
                        <div class="card-header">
                            <div class="card-title">–ë–∞“ì–∞ “õ–æ—é</div>
                            <button class="btn btn-success" style="width: auto; padding: 8px 16px; font-size: 13px;" onclick="saveGrades()">
                                <i class="fas fa-save"></i> –°–∞“õ—Ç–∞—É
                            </button>
                        </div>
                        <div style="overflow-x: auto;">
                            <table class="grade-entry-table">
                                <thead>
                                    <tr>
                                        <th>–°—Ç—É–¥–µ–Ω—Ç</th>
                                        <th>–°–∞–±–∞“õ<br>(30)</th>
                                        <th>–°”®–ñ<br>(20)</th>
                                        <th>–ê–ë<br>(20)</th>
                                        <th>“ö–æ—Ä—ã—Ç.<br>(30)</th>
                                        <th>–ë–∞—Ä–ª—ã“ì—ã</th>
                                    </tr>
                                </thead>
                                <tbody id="gradeTableBody">
                                    <!-- Generated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div id="studentGradesView">
                        <div class="card" style="background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); color: white;">
                            <div style="text-align: center; padding: 20px;">
                                <div style="font-size: 14px; opacity: 0.9;">–ê“ì—ã–º–¥—ã“õ GPA</div>
                                <div style="font-size: 48px; font-weight: 800; margin: 8px 0;">3.85</div>
                                <div style="font-size: 14px; opacity: 0.9;">–¢–∞–º–∞—à–∞! üéâ</div>
                            </div>
                        </div>

                        <div class="card" style="margin-top: 16px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                                <div>
                                    <div style="font-weight: 700;">Web-–ø—Ä–æ–≥—Ä–∞–º–º–∞–ª–∞—É</div>
                                    <div style="font-size: 13px; color: var(--text-secondary);">–ê—Ö–º–µ—Ç–æ–≤ –°.–ë.</div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 28px; font-weight: 800; color: var(--success);">95</div>
                                    <div style="font-size: 12px; color: var(--text-secondary);">–ê (”©—Ç–µ –∂–∞“õ—Å—ã)</div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 8px;">
                                <span style="background: var(--bg); padding: 6px 10px; border-radius: 8px; font-size: 12px;">–°–∞–±–∞“õ: 28/30</span>
                                <span style="background: var(--bg); padding: 6px 10px; border-radius: 8px; font-size: 12px;">–°”®–ñ: 19/20</span>
                                <span style="background: var(--bg); padding: 6px 10px; border-radius: 8px; font-size: 12px;">–ê–ë: 19/20</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PROFILE SECTION -->
            <div class="content-section" id="profileSection">
                <div class="profile-header">
                    <div class="profile-avatar" id="profileAvatar">–ê”ò</div>
                    <div class="profile-name" id="profileName">–ê–∑–∞–º–∞—Ç ”ò–ª—ñ–º</div>
                    <div class="profile-role" id="profileRole">–°—Ç—É–¥–µ–Ω—Ç ‚Ä¢ IT-231</div>
                    
                    <div class="profile-stats">
                        <div class="profile-stat">
                            <div class="profile-stat-value" id="profileGPA">3.85</div>
                            <div class="profile-stat-label">GPA</div>
                        </div>
                        <div class="profile-stat">
                            <div class="profile-stat-value" id="profileDebt">0</div>
                            <div class="profile-stat-label">“ö–∞—Ä–∑—ã (‚Ç∏)</div>
                        </div>
                        <div class="profile-stat">
                            <div class="profile-stat-value" id="profileAttendance">96%</div>
                            <div class="profile-stat-label">“ö–∞—Ç—ã—Å—É</div>
                        </div>
                    </div>
                </div>

                <div style="padding: 0 20px 100px;">
                    <div class="menu-list">
                        <div class="menu-item" onclick="showModal('–ñ–µ–∫–µ –∞“õ–ø–∞—Ä–∞—Ç', '–ê—Ç—ã-–∂”©–Ω—ñ: –ê–∑–∞–º–∞—Ç ”ò–ª—ñ–º\\n–¢–æ–±—ã: IT-231\\n–ú–∞–º–∞–Ω–¥—ã“ì—ã: Software Engineering\\n–ö—É—Ä—Å—ã: 2')">
                            <div class="menu-icon"><i class="fas fa-id-card"></i></div>
                            <div class="menu-text">–ñ–µ–∫–µ –∞“õ–ø–∞—Ä–∞—Ç</div>
                            <i class="fas fa-chevron-right menu-arrow"></i>
                        </div>
                        <div class="menu-item" onclick="showModal('–ë–∞–ø—Ç–∞—É–ª–∞—Ä', '“ö“±–ø–∏—è —Å”©–∑–¥—ñ ”©–∑–≥–µ—Ä—Ç—É\\n–¢—ñ–ª–¥—ñ —Ç–∞“£–¥–∞—É\\n–•–∞–±–∞—Ä–ª–∞–Ω–¥—ã—Ä—É–ª–∞—Ä')">
                            <div class="menu-icon"><i class="fas fa-cog"></i></div>
                            <div class="menu-text">–ë–∞–ø—Ç–∞—É–ª–∞—Ä</div>
                            <i class="fas fa-chevron-right menu-arrow"></i>
                        </div>
                        <div class="menu-item" onclick="showModal"('–ö”©–º–µ–∫'))">
                            <div class="menu-icon"><i class="fas fa-question-circle"></i></div>
                            <div class="menu-text">–ö”©–º–µ–∫</div>
                            <i class="fas fa-chevron-right menu-arrow"></i>
                        </div>
                    </div>

                    <div class="menu-list" style="margin-top: 20px;">
                        <div class="menu-item" style="color: var(--danger);" onclick="logout()">
                            <div class="menu-icon" style="background: rgba(239, 68, 68, 0.1); color: var(--danger);">
                                <i class="fas fa-sign-out-alt"></i>
                            </div>
                            <div class="menu-text">–ñ“Ø–π–µ–¥–µ–Ω —à—ã“ì—É</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- NOTIFICATIONS SECTION -->
            <div class="content-section" id="notificationsSection">
                <div style="padding: 20px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <div class="section-title">–•–∞–±–∞—Ä–ª–∞–Ω–¥—ã—Ä—É–ª–∞—Ä</div>
                        <span style="color: var(--primary); font-size: 13px; font-weight: 600; cursor: pointer;" onclick="markAllAsRead()">
                            –ë–∞—Ä–ª—ã“ì—ã–Ω –æ“õ—ã–ª–¥—ã –¥–µ–ø –±–µ–ª–≥—ñ–ª–µ—É
                        </span>
                    </div>
                    <div id="notificationsList">
                        <!-- Generated by JS -->
                    </div>
                </div>
            </div>

            <!-- ATTENDANCE SECTION (Teacher only) -->
            <div class="content-section" id="attendanceSection">
                <div style="padding: 20px;">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">“ö–∞—Ç—ã—Å—É –∂—É—Ä–Ω–∞–ª—ã</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">–ë“Ø–≥—ñ–Ω: 13.01.2025</div>
                        </div>
                        
                        <div style="margin-bottom: 16px;">
                            <select class="form-select" id="attendanceGroup">
                                <option>IT-231 - Web-–ø—Ä–æ–≥—Ä–∞–º–º–∞–ª–∞—É</option>
                                <option>IT-232 - Web-–ø—Ä–æ–≥—Ä–∞–º–º–∞–ª–∞—É</option>
                            </select>
                        </div>

                        <div class="attendance-list" id="attendanceList">
                            <!-- Generated by JS -->
                        </div>

                        <button class="btn btn-primary" style="margin-top: 20px;" onclick="saveAttendance()">
                            <i class="fas fa-save"></i>
                            –°–∞“õ—Ç–∞—É
                        </button>
                    </div>
                </div>
            </div>

            <!-- Bottom Nav -->
            <div class="bottom-nav">
                <button class="nav-item active" onclick="switchTab('home')">
                    <div class="nav-icon"><i class="fas fa-home"></i></div>
                    <span class="nav-label">–ë–∞—Å—Ç—ã</span>
                </button>
                <button class="nav-item" onclick="switchTab('schedule')">
                    <div class="nav-icon"><i class="fas fa-calendar-alt"></i></div>
                    <span class="nav-label">–ö–µ—Å—Ç–µ</span>
                </button>
                <button class="nav-item" onclick="switchTab('grades')">
                    <div class="nav-icon"><i class="fas fa-star"></i></div>
                    <span class="nav-label">–ë–∞“ì–∞–ª–∞—Ä</span>
                </button>
                <button class="nav-item" onclick="switchTab('profile')">
                    <div class="nav-icon"><i class="fas fa-user"></i></div>
                    <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
                </button>
            </div>
        </div>

        <!-- Modal -->
        <div class="modal" id="modal" onclick="closeModal(event)">
            <div class="modal-content" onclick="event.stopPropagation()">
                <div class="modal-header">
                    <div class="modal-title" id="modalTitle">Title</div>
                    <button class="close-btn" onclick="closeModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div id="modalBody" style="line-height: 1.6; color: var(--text-secondary);">
                    Content
                </div>
            </div>
        </div>
    </div>

    <script>
        // Mock Database
        const users = [
            { email: 'student@narxoz.kz', password: '1111', name: '–ê–∑–∞–º–∞—Ç ”ò–ª—ñ–º', role: 'student', group: 'IT-231', gpa: '3.85', debt: '0', attendance: '96%', avatar: '–ê”ò' },
            { email: 'teacher@narxoz.kz', password: '2222', name: '–°–∞—Ä—Å–µ–Ω–±–∞–µ–≤–∞ –ê–π–≥“Ø–ª', role: 'teacher', group: 'IT-231, IT-232', gpa: '-', debt: '-', attendance: '-', avatar: '–°–ê' },
            { email: 'curator@narxoz.kz', password: '3333', name: '–ù“±—Ä–ª–∞–Ω–æ–≤ –ë–∞—É—ã—Ä–∂–∞–Ω', role: 'curator', group: 'IT-231', gpa: '-', debt: '-', attendance: '-', avatar: '–ù–ë' },
            { email: 'admin@narxoz.kz', password: '4444', name: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä', role: 'admin', group: '–ë–∞—Ä–ª—ã“õ —Ç–æ–ø—Ç–∞—Ä', gpa: '-', debt: '-', attendance: '-', avatar: '–ê–î' }
        ];

        const students = [
            { id: 1, name: '–ê–∑–∞–º–∞—Ç ”ò–ª—ñ–º', group: 'IT-231', attendance: 28, szh: 19, ab: 19, final: 28 },
            { id: 2, name: '–î–∏–Ω–∞ –°–∞—Ä—Å–µ–Ω–æ–≤–∞', group: 'IT-231', attendance: 30, szh: 20, ab: 20, final: 30 },
            { id: 3, name: '–ë–æ–ª–∞—Ç –ù“±—Ä–ª–∞–Ω–æ–≤', group: 'IT-231', attendance: 25, szh: 15, ab: 17, final: 24 },
            { id: 4, name: '–ê–π–≥“Ø–ª –°–µ—Ä—ñ–∫–æ–≤–∞', group: 'IT-232', attendance: 29, szh: 19, ab: 18, final: 27 }
        ];

        let notifications = [
            { id: 1, type: 'grade', title: '–ñ–∞“£–∞ –±–∞“ì–∞ “õ–æ–π—ã–ª–¥—ã', text: 'Web-–ø—Ä–æ–≥—Ä–∞–º–º–∞–ª–∞—É –ø”ô–Ω—ñ–Ω–µ–Ω –°”®–ñ –±–∞“ì–∞—Å—ã: 19/20', time: '–ë“Ø–≥—ñ–Ω, 10:30', read: false },
            { id: 2, type: 'schedule', title: '–°–∞–±–∞“õ —É–∞“õ—ã—Ç—ã ”©–∑–≥–µ—Ä–¥—ñ', text: '–ï—Ä—Ç–µ“£–≥—ñ –ú”ô–ª—ñ–º–µ—Ç—Ç–µ—Ä –±–∞–∑–∞—Å—ã —Å–∞–±–∞“õ 10:00-–¥–∞–Ω 12:00-“ì–∞ –∞—É—Å—Ç—ã—Ä—ã–ª–¥—ã', time: '–ö–µ—à–µ, 16:45', read: false },
            { id: 3, type: 'alert', title: '–ú–µ—Ä–∑—ñ–º –∂–∞“õ—ã–Ω–¥–∞–ø “õ–∞–ª–¥—ã', text: 'React –∂–æ–±–∞—Å—ã–Ω —Ç–∞–ø—Å—ã—Ä—É“ì–∞ 2 –∫“Ø–Ω “õ–∞–ª–¥—ã', time: '–ö–µ—à–µ, 09:00', read: false },
            { id: 4, type: 'grade', title: '“ö–æ—Ä—ã—Ç—ã–Ω–¥—ã –±–∞“ì–∞', text: '–ê“ì—ã–ª—à—ã–Ω —Ç—ñ–ª—ñ–Ω–µ–Ω “õ–æ—Ä—ã—Ç—ã–Ω–¥—ã –±–∞“ì–∞: 92 (A)', time: '3 –∫“Ø–Ω –±“±—Ä—ã–Ω', read: true }
        ];

        let currentUser = null;
        let selectedUser = null;

        // Initialize
        window.onload = function() {
            setTimeout(() => {
                document.getElementById('splash').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('splash').style.display = 'none';
                    checkLogin();
                }, 500);
            }, 2000);

            renderUserList();
            updateNotificationBadge();
        };

        function checkLogin() {
            const saved = localStorage.getItem('narxoz_current_user');
            if (saved) {
                currentUser = JSON.parse(saved);
                showMainApp();
            } else {
                document.getElementById('authScreen').classList.add('active');
            }
        }

        function renderUserList() {
            const container = document.getElementById('userList');
            container.innerHTML = users.map(user => `
                <div class="user-item" onclick="selectUser('${user.email}')">
                    <div class="user-avatar-small">${user.avatar}</div>
                    <div class="user-info-small">
                        <div class="user-name-small">${user.name}</div>
                        <div class="user-role-small">${user.email} ‚Ä¢ ${user.role === 'student' ? '–°—Ç—É–¥–µ–Ω—Ç' : user.role === 'teacher' ? '–û“õ—ã—Ç—É—à—ã' : user.role === 'curator' ? '–ö—É—Ä–∞—Ç–æ—Ä' : '–ê–¥–º–∏–Ω'}</div>
                    </div>
                    <i class="fas fa-chevron-right" style="color: var(--text-secondary);"></i>
                </div>
            `).join('');
        }

        function selectUser(email) {
            selectedUser = users.find(u => u.email === email);
            if (selectedUser) {
                document.getElementById('codeUserName').textContent = selectedUser.name;
                document.getElementById('authScreen').classList.remove('active');
                document.getElementById('codeScreen').classList.add('active');
                document.querySelectorAll('.code-input')[0].focus();
            }
        }

        function backToUsers() {
            document.getElementById('codeScreen').classList.remove('active');
            document.getElementById('authScreen').classList.add('active');
            document.querySelectorAll('.code-input').forEach(input => input.value = '');
        }

        function moveToNext(input, index) {
            if (input.value.length === 1) {
                const inputs = document.querySelectorAll('.code-input');
                if (index < inputs.length - 1) {
                    inputs[index + 1].focus();
                }
            }
        }

        function verifyCode() {
            const inputs = document.querySelectorAll('.code-input');
            const code = Array.from(inputs).map(i => i.value).join('');
            
            if (code === selectedUser.password) {
                currentUser = selectedUser;
                localStorage.setItem('narxoz_current_user', JSON.stringify(currentUser));
                document.getElementById('codeScreen').classList.remove('active');
                showMainApp();
            } else {
                alert('“ö–∞—Ç–µ –∫–æ–¥! –°—ã–Ω-+—ã: ' + selectedUser.password);
            }
        }

        function showMainApp() {
            document.getElementById('mainApp').classList.add('active');
            updateUIForRole();
            renderNotifications();
            loadGrades();
            renderSchedule();
            if (currentUser.role === 'teacher' || currentUser.role === 'curator') {
                renderAttendance();
            }
        }

        function updateUIForRole() {
            const isTeacher = currentUser.role === 'teacher' || currentUser.role === 'curator' || currentUser.role === 'admin';
            const isStudent = currentUser.role === 'student';

            // Update Home Header
            document.getElementById('homeUserName').textContent = currentUser.name;
            document.getElementById('userRoleBadge').style.display = 'flex';
            document.getElementById('roleText').textContent = 
                currentUser.role === 'student' ? '–°—Ç—É–¥–µ–Ω—Ç' : 
                currentUser.role === 'teacher' ? '–û“õ—ã—Ç—É—à—ã' : 
                currentUser.role === 'curator' ? '–ö—É—Ä–∞—Ç–æ—Ä' : '–ê–¥–º–∏–Ω';
            
            document.getElementById('homeGPA').textContent = currentUser.gpa;
            document.getElementById('homeDebt').textContent = currentUser.debt === '0' ? '0 ‚Ç∏' : currentUser.debt + ' ‚Ç∏';
            document.getElementById('homeAttendance').textContent = currentUser.attendance;

            // Profile
            document.getElementById('profileName').textContent = currentUser.name;
            document.getElementById('profileRole').textContent = 
                (currentUser.role === 'student' ? '–°—Ç—É–¥–µ–Ω—Ç' : 
                 currentUser.role === 'teacher' ? '–û“õ—ã—Ç—É—à—ã' : 
                 currentUser.role === 'curator' ? '–ö—É—Ä–∞—Ç–æ—Ä' : '–ê–¥–º–∏–Ω') + ' ‚Ä¢ ' + currentUser.group;
            document.getElementById('profileAvatar').textContent = currentUser.avatar;
            document.getElementById('profileGPA').textContent = currentUser.gpa;
            document.getElementById('profileDebt').textContent = currentUser.debt;
            document.getElementById('profileAttendance').textContent = currentUser.attendance;

            // Show/Hide Teacher Actions
            document.getElementById('teacherActions').style.display = isTeacher ? 'grid' : 'none';
            document.getElementById('studentContent').style.display = isStudent ? 'block' : 'none';

            // Show/Hide Grade Entry
            document.getElementById('gradeEntryCard').style.display = isTeacher ? 'block' : 'none';
            document.getElementById('studentGradesView').style.display = isStudent ? 'block' : 'none';

            // Schedule Edit Button
            document.getElementById('scheduleEditBtn').style.display = isTeacher ? 'flex' : 'none';

            // If teacher, remove GPA/Debt from header (only global header remains with icons)
            if (isTeacher) {
                document.querySelector('.quick-stats').innerHTML = `
                    <div class="stat-chip">
                        <div class="stat-chip-label">–¢–æ–ø—Ç–∞—Ä</div>
                        <div class="stat-chip-value">2</div>
                    </div>
                    <div class="stat-chip">
                        <div class="stat-chip-label">–°—Ç—É–¥–µ–Ω—Ç—Ç–µ—Ä</div>
                        <div class="stat-chip-value">48</div>
                    </div>
                    <div class="stat-chip">
                        <div class="stat-chip-label">–°–∞–±–∞“õ</div>
                        <div class="stat-chip-value">4</div>
                    </div>
                `;
            }
        }

        function switchTab(tab) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));

            const tabMap = {
                'home': { section: 'homeSection', title: '–ë–∞—Å—Ç—ã –±–µ—Ç', index: 0 },
                'schedule': { section: 'scheduleSection', title: '–ö–µ—Å—Ç–µ', index: 1 },
                'grades': { section: 'gradesSection', title: '–ë–∞“ì–∞–ª–∞—Ä', index: 2 },
                'profile': { section: 'profileSection', title: '–ü—Ä–æ—Ñ–∏–ª—å', index: 3 }
            };

            if (tabMap[tab]) {
                document.getElementById(tabMap[tab].section).classList.add('active');
                document.querySelectorAll('.nav-item')[tabMap[tab].index].classList.add('active');
                document.getElementById('pageTitle').textContent = tabMap[tab].title;
            }
        }

        function goToNotifications() {
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById('notificationsSection').classList.add('active');
            document.getElementById('pageTitle').textContent = '–•–∞–±–∞—Ä–ª–∞–Ω–¥—ã—Ä—É–ª–∞—Ä';
        }

        function goToProfile() {
            switchTab('profile');
        }

        // Notifications
        function renderNotifications() {
            const container = document.getElementById('notificationsList');
            if (notifications.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-bell-slash"></i>
                        <div>–•–∞–±–∞—Ä–ª–∞–Ω–¥—ã—Ä—É–ª–∞—Ä –∂–æ“õ</div>
                    </div>
                `;
                return;
            }

            container.innerHTML = notifications.map(notif => `
                <div class="notification-item ${notif.read ? 'read' : 'unread'}" onclick="markAsRead(${notif.id})">
                    <div class="notification-icon ${notif.type}">
                        <i class="fas fa-${notif.type === 'grade' ? 'star' : notif.type === 'schedule' ? 'clock' : 'exclamation-triangle'}"></i>
                    </div>
                    <div class="notification-content">
                        <div class="notification-title">${notif.title}</div>
                        <div class="notification-text">${notif.text}</div>
                        <div class="notification-time">${notif.time}</div>
                    </div>
                    <i class="fas fa-times notification-delete" onclick="deleteNotification(event, ${notif.id})"></i>
                </div>
            `).join('');
        }

        function markAsRead(id) {
            const notif = notifications.find(n => n.id === id);
            if (notif) {
                notif.read = true;
                renderNotifications();
                updateNotificationBadge();
            }
        }

        function markAllAsRead() {
            notifications.forEach(n => n.read = true);
            renderNotifications();
            updateNotificationBadge();
        }

        function deleteNotification(event, id) {
            event.stopPropagation();
            notifications = notifications.filter(n => n.id !== id);
            renderNotifications();
            updateNotificationBadge();
        }

        function updateNotificationBadge() {
            const unread = notifications.filter(n => !n.read).length;
            const badge = document.getElementById('notifBadge');
            if (unread > 0) {
                badge.textContent = unread;
                badge.classList.remove('hidden');
            } else {
                badge.classList.add('hidden');
            }
        }

        // Teacher Functions
        function loadGrades() {
            if (currentUser.role === 'student') return;
            
            const tbody = document.getElementById('gradeTableBody');
            const group = document.getElementById('gradeGroupSelect').value;
            
            const groupStudents = students.filter(s => s.group === group);
            
            tbody.innerHTML = groupStudents.map(student => {
                const total = Math.round((student.attendance * 0.3) + (student.szh * 0.2) + (student.ab * 0.2) + (student.final * 0.3));
                return `
                    <tr>
                        <td><strong>${student.name}</strong></td>
                        <td><input type="number" class="grade-input-small" value="${student.attendance}" max="30" onchange="updateStudentGrade(${student.id}, 'attendance', this.value)"></td>
                        <td><input type="number" class="grade-input-small" value="${student.szh}" max="20" onchange="updateStudentGrade(${student.id}, 'szh', this.value)"></td>
                        <td><input type="number" class="grade-input-small" value="${student.ab}" max="20" onchange="updateStudentGrade(${student.id}, 'ab', this.value)"></td>
                        <td><input type="number" class="grade-input-small" value="${student.final}" max="30" onchange="updateStudentGrade(${student.id}, 'final', this.value)"></td>
                        <td class="total-grade" id="total-${student.id}">${total}</td>
                    </tr>
                `;
            }).join('');
        }

        function updateStudentGrade(id, type, value) {
            const student = students.find(s => s.id === id);
            if (student) {
                student[type] = parseInt(value) || 0;
                const total = Math.round((student.attendance * 0.3) + (student.szh * 0.2) + (student.ab * 0.2) + (student.final * 0.3));
                document.getElementById(`total-${id}`).textContent = total;
            }
        }

        function saveGrades() {
            alert('–ë–∞“ì–∞–ª–∞—Ä —Å–∞“õ—Ç–∞–ª–¥—ã! ‚úÖ');
            // Add notification for students
            notifications.unshift({
                id: Date.now(),
                type: 'grade',
                title: '–ë–∞“ì–∞ –∂–∞“£–∞—Ä—Ç—ã–ª–¥—ã',
                text: `${document.getElementById('gradeSubjectSelect').value} –ø”ô–Ω—ñ–Ω–µ–Ω –∂–∞“£–∞ –±–∞“ì–∞–ª–∞—Ä “õ–æ–π—ã–ª–¥—ã`,
                time: '–¢–æ–ª—å–∫–æ —á—Ç–æ',
                read: false
            });
            updateNotificationBadge();
        }

        function renderAttendance() {
            const container = document.getElementById('attendanceList');
            container.innerHTML = students.map(student => `
                <div class="attendance-item">
                    <div>
                        <div class="attendance-name">${student.name}</div>
                        <div class="attendance-group">${student.group}</div>
                    </div>
                    <div class="attendance-toggle">
                        <button class="toggle-btn present ${Math.random() > 0.2 ? 'active' : ''}" onclick="toggleAttendance(this)">
                            <i class="fas fa-check"></i> –ë–∞—Ä
                        </button>
                        <button class="toggle-btn absent ${Math.random() > 0.8 ? 'active' : ''}" onclick="toggleAttendance(this)">
                            <i class="fas fa-times"></i> –ñ–æ“õ
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function toggleAttendance(btn) {
            const parent = btn.parentElement;
            parent.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function saveAttendance() {
            alert('“ö–∞—Ç—ã—Å—É —Ç—ñ—Ä–∫–µ–ª–¥—ñ! ‚úÖ');
        }

        function renderSchedule() {
            const container = document.getElementById('scheduleList');
            container.innerHTML = `
                <div class="schedule-item">
                    <div class="time-column">
                        <div class="time-start">09:00</div>
                        <div class="time-line"></div>
                        <div class="time-end">10:30</div>
                    </div>
                    <div class="schedule-content">
                        <div class="subject-name">Web-–ø—Ä–æ–≥—Ä–∞–º–º–∞–ª–∞—É</div>
                        <div class="subject-room">
                            <i class="fas fa-map-marker-alt"></i>
                            305 –∫–∞–±., –ê –∫–æ—Ä–ø—É—Å
                        </div>
                        <div style="font-size: 13px; color: var(--text-secondary);">
                            <i class="fas fa-user-tie" style="margin-right: 6px;"></i>
                            ${currentUser.name}
                        </div>
                    </div>
                </div>
                <div class="schedule-item">
                    <div class="time-column">
                        <div class="time-start">10:45</div>
                        <div class="time-line"></div>
                        <div class="time-end">12:15</div>
                    </div>
                    <div class="schedule-content">
                        <div class="subject-name">–ú”ô–ª—ñ–º–µ—Ç—Ç–µ—Ä –±–∞–∑–∞—Å—ã</div>
                        <div class="subject-room">
                            <i class="fas fa-map-marker-alt"></i>
                            412 –∫–∞–±., B –∫–æ—Ä–ø—É—Å
                        </div>
                        <div style="font-size: 13px; color: var(--text-secondary);">
                            <i class="fas fa-user-tie" style="margin-right: 6px;"></i>
                            ${currentUser.name}
                        </div>
                    </div>
                </div>
            `;
        }

        function openGradeEntry() {
            switchTab('grades');
        }

        function openAttendance() {
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById('attendanceSection').classList.add('active');
            document.getElementById('pageTitle').textContent = '“ö–∞—Ç—ã—Å—É';
        }

        function openScheduleEdit() {
            showModal('–°–∞–±–∞“õ “õ–æ—Å—É', '–ú“±–Ω–¥–∞ –∂–∞“£–∞ —Å–∞–±–∞“õ “õ–æ—Å—É —Ñ–æ—Ä–º–∞—Å—ã –±–æ–ª–∞–¥—ã.\\n\\n–ü”ô–Ω: Web-–ø—Ä–æ–≥—Ä–∞–º–º–∞–ª–∞—É\\n–£–∞“õ—ã—Ç: 09:00 - 10:30\\n–ö–∞–±–∏–Ω–µ—Ç: 305\\n–¢–æ–ø: IT-231');
        }

        function showStats() {
            showModal('–¢–æ–ø —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞—Å—ã', 'IT-231 —Ç–æ–ø:\\n\\n–û—Ä—Ç–∞—à–∞ GPA: 3.65\\n“ö–∞—Ç—ã—Å—É: 94%\\n–¢”©–º–µ–Ω GPA: 2 —Å—Ç—É–¥–µ–Ω—Ç\\n–ê—Ä—Ç—ã“õ—à—ã–ª—ã“õ: 5 —Å—Ç—É–¥–µ–Ω—Ç');
        }

        // Modal
        function showModal(title, content) {
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalBody').innerHTML = content.replace(/\\n/g, '<br>');
            document.getElementById('modal').classList.add('show');
        }

        function closeModal(event) {
            if (!event || event.target.id === 'modal') {
                document.getElementById('modal').classList.remove('show');
            }
        }

        function logout() {
            if (confirm('–ñ“Ø–π–µ–¥–µ–Ω —à—ã“õ“õ—ã“£—ã–∑ –∫–µ–ª–µ –º–µ?')) {
                localStorage.removeItem('narxoz_current_user');
                location.reload();
            }
        }
    </script>
</body>
</html>